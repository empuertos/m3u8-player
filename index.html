const api = "https://noisy-frog-a9ab.st3v3.workers.dev"; // your Worker
const target = "https://vidrock.net/movie/1038392";

async function loadVidrock() {
  const res = await fetch(`${api}/?url=${encodeURIComponent(target)}`);
  const data = await res.json();
  console.log("Worker response:", data); // debug

  if (data.stream) {
    videojs("player", {
      sources: [{ src: data.stream, type: "application/x-mpegURL" }]
    });
  } else {
    document.body.innerHTML += `<p>‚ùå Error: ${data.error}</p>`;
  }
}
loadVidrock();
